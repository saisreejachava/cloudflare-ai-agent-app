{"version":3,"file":"internal_context.js","names":[],"sources":["../src/internal_context.ts"],"sourcesContent":["import { AsyncLocalStorage } from \"node:async_hooks\";\nimport type { Connection } from \"partyserver\";\n\nexport type AgentEmail = {\n  from: string;\n  to: string;\n  getRaw: () => Promise<Uint8Array>;\n  headers: Headers;\n  rawSize: number;\n  setReject: (reason: string) => void;\n  forward: (rcptTo: string, headers?: Headers) => Promise<EmailSendResult>;\n  reply: (options: {\n    from: string;\n    to: string;\n    raw: string;\n  }) => Promise<EmailSendResult>;\n  /** @internal Indicates email was routed via createSecureReplyEmailResolver */\n  _secureRouted?: boolean;\n};\n\nexport type AgentContextStore = {\n  // Using unknown to avoid circular dependency with Agent\n  agent: unknown;\n  connection: Connection | undefined;\n  request: Request | undefined;\n  email: AgentEmail | undefined;\n};\n\n/**\n * @internal â€” This is an internal implementation detail.\n * Importing or relying on this symbol **will** break your code in a future release.\n */\nexport const __DO_NOT_USE_WILL_BREAK__agentContext =\n  new AsyncLocalStorage<AgentContextStore>();\n"],"mappings":";;;;;;;AAgCA,MAAa,wCACX,IAAI,mBAAsC"}