{"version":3,"file":"types.js","names":[],"sources":["../src/types.ts"],"sourcesContent":["import type { UIMessage } from \"ai\";\n\n/**\n * Enum for message types to improve type safety and maintainability\n */\nexport enum MessageType {\n  CF_AGENT_CHAT_MESSAGES = \"cf_agent_chat_messages\",\n  CF_AGENT_USE_CHAT_REQUEST = \"cf_agent_use_chat_request\",\n  CF_AGENT_USE_CHAT_RESPONSE = \"cf_agent_use_chat_response\",\n  CF_AGENT_CHAT_CLEAR = \"cf_agent_chat_clear\",\n  CF_AGENT_CHAT_REQUEST_CANCEL = \"cf_agent_chat_request_cancel\",\n\n  /** Sent by server when client connects and there's an active stream to resume */\n  CF_AGENT_STREAM_RESUMING = \"cf_agent_stream_resuming\",\n  /** Sent by client to acknowledge stream resuming notification and request chunks */\n  CF_AGENT_STREAM_RESUME_ACK = \"cf_agent_stream_resume_ack\",\n\n  /** Client sends tool result to server (for client-side tools) */\n  CF_AGENT_TOOL_RESULT = \"cf_agent_tool_result\",\n  /** Server notifies client that a message was updated (e.g., tool result applied) */\n  CF_AGENT_MESSAGE_UPDATED = \"cf_agent_message_updated\",\n  /** Client sends tool approval response to server (for tools with needsApproval) */\n  CF_AGENT_TOOL_APPROVAL = \"cf_agent_tool_approval\"\n}\n\n/**\n * Types of messages sent from the Agent to clients\n */\nexport type OutgoingMessage<ChatMessage extends UIMessage = UIMessage> =\n  | {\n      /** Indicates this message is a command to clear chat history */\n      type: MessageType.CF_AGENT_CHAT_CLEAR;\n    }\n  | {\n      /** Indicates this message contains updated chat messages */\n      type: MessageType.CF_AGENT_CHAT_MESSAGES;\n      /** Array of chat messages */\n      messages: ChatMessage[];\n    }\n  | {\n      /** Indicates this message is a response to a chat request */\n      type: MessageType.CF_AGENT_USE_CHAT_RESPONSE;\n      /** Unique ID of the request this response corresponds to */\n      id: string;\n      /** Content body of the response */\n      body: string;\n      /** Whether this is the final chunk of the response */\n      done: boolean;\n      /** Whether this response contains an error */\n      error?: boolean;\n      /** Whether this is a continuation (append to last assistant message) */\n      continuation?: boolean;\n    }\n  | {\n      /** Indicates the server is resuming an active stream */\n      type: MessageType.CF_AGENT_STREAM_RESUMING;\n      /** The request ID of the stream being resumed */\n      id: string;\n    }\n  | {\n      /** Server notifies client that a message was updated (e.g., tool result applied) */\n      type: MessageType.CF_AGENT_MESSAGE_UPDATED;\n      /** The updated message */\n      message: ChatMessage;\n    };\n\n/**\n * Types of messages sent from clients to the Agent\n */\nexport type IncomingMessage<ChatMessage extends UIMessage = UIMessage> =\n  | {\n      /** Indicates this message is a command to clear chat history */\n      type: MessageType.CF_AGENT_CHAT_CLEAR;\n    }\n  | {\n      /** Indicates this message is a request to the chat API */\n      type: MessageType.CF_AGENT_USE_CHAT_REQUEST;\n      /** Unique ID for this request */\n      id: string;\n      /** Request initialization options */\n      init: Pick<\n        RequestInit,\n        | \"method\"\n        | \"keepalive\"\n        | \"headers\"\n        | \"body\"\n        | \"redirect\"\n        | \"integrity\"\n        | \"credentials\"\n        | \"mode\"\n        | \"referrer\"\n        | \"referrerPolicy\"\n        | \"window\"\n      >;\n    }\n  | {\n      /** Indicates this message contains updated chat messages */\n      type: MessageType.CF_AGENT_CHAT_MESSAGES;\n      /** Array of chat messages */\n      messages: ChatMessage[];\n    }\n  | {\n      /** Indicates the user wants to stop generation of this message */\n      type: MessageType.CF_AGENT_CHAT_REQUEST_CANCEL;\n      id: string;\n    }\n  | {\n      /** Client acknowledges stream resuming notification and is ready to receive chunks */\n      type: MessageType.CF_AGENT_STREAM_RESUME_ACK;\n      /** The request ID of the stream being resumed */\n      id: string;\n    }\n  | {\n      /** Client sends tool result to server (for client-side tools) */\n      type: MessageType.CF_AGENT_TOOL_RESULT;\n      /** The tool call ID this result is for */\n      toolCallId: string;\n      /** The name of the tool */\n      toolName: string;\n      /** The output from the tool execution */\n      output: unknown;\n      /** Whether server should auto-continue the conversation after applying result */\n      autoContinue?: boolean;\n    }\n  | {\n      /** Client sends tool approval response to server (for tools with needsApproval) */\n      type: MessageType.CF_AGENT_TOOL_APPROVAL;\n      /** The tool call ID this approval is for */\n      toolCallId: string;\n      /** Whether the tool execution was approved */\n      approved: boolean;\n    };\n"],"mappings":";;;;AAKA,IAAY,oDAAL;AACL;AACA;AACA;AACA;AACA;;AAGA;;AAEA;;AAGA;;AAEA;;AAEA"}